<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RecyShred | Home</title>
<link rel="stylesheet" href="style.css">
<style>
  /* Center QR code section */
  #qr-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    text-align: center;
  }
  canvas {
    margin-top: 20px;
  }
</style>
</head>
<body>

<div id="qr-section" style="display:none;">
  <h1>RecyShred Access</h1>
  <p id="qr-msg"></p>
  <canvas id="userQR" style="display:none;"></canvas>
  <canvas id="adminQR" style="display:none;"></canvas>
</div>

<!-- Original site content (hidden for mobile users) -->
<div id="site-content">
<header>
  <img src="logo.png" class="site-logo" alt="RecyShred Logo">
  <h1>RecyShred</h1>
  <p>Turn Waste into Worth</p>
  <button id="theme-toggle" class="theme-btn">üåô Dark Mode</button>
</header>

<nav>
  <a href="index.html" class="active">Home</a>
  <a href="dashboard.html">Dashboard</a>
  <a href="binstatus.html">Bin Status</a>
</nav>

<div class="container">

  <section class="section hero-section">
    <h2>Welcome to <strong>RecyShred</strong></h2>
    <p>
      Our smart Recycling Bin rewards users with coins based on the
      <strong>weight of recyclable materials</strong>.
    </p>
    <a href="dashboard.html" class="bin-btn">Go to Dashboard</a>
  </section>

  <section class="section">
    <h2>How It Works</h2>
    <div class="card-grid">

      <div class="card hover-gif">
        <div class="gif-wrap">
          <img src="insert.png" class="card-gif static" alt="Insert Material">
          <img src="insert.gif" class="card-gif animated" alt="Insert Material">
        </div>
        <h3>Insert Material</h3>
        <p>Insert recyclable plastic bottles and cans.</p>
      </div>  

      <div class="card hover-gif">
        <div class="gif-wrap">
          <img src="shred.png" class="card-gif static" alt="Shred Material">
          <img src="shred.gif" class="card-gif animated" alt="Shred Material">
        </div>
        <h3>Shred & Measure</h3>
        <p>The system shreds and measures the material.</p>
      </div>

      <div class="card hover-gif">
        <div class="gif-wrap">
          <img src="redeem.png" class="card-gif static" alt="Redeem Rewards">
          <img src="redeem.gif" class="card-gif animated" alt="Redeem Rewards">
        </div>
        <h3>Redeem Rewards</h3>
        <p>Check your dashboard to view your balance, and use the machine to collect your money.</p>
      </div>

    </div>
  </section>

</div>
</div>

<script>
  // Theme toggle
  const toggleBtn = document.getElementById("theme-toggle");
  if (toggleBtn) {
    toggleBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
      toggleBtn.textContent = document.body.classList.contains("dark-mode") ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
      localStorage.setItem("theme", document.body.classList.contains("dark-mode") ? "dark" : "light");
    });
  }
  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark-mode");
    toggleBtn.textContent = "‚òÄÔ∏è Light Mode";
  }
</script>

<!-- QR Code Script -->
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js">

  // Device detection
  function isMobile() {
    return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  }

  // ‚úÖ CHANGE THIS to your real hosted link (Vercel/Netlify/IP address)
  const BASE_URL = "https://recyshredv3.vercel.app/index.html";
  const ADMIN_TOKEN = "MY_SECURE_ADMIN_TOKEN";
  const urlParams = new URLSearchParams(window.location.search);
  const token = urlParams.get("token");

  const qrSection = document.getElementById("qr-section");
  const qrMsg = document.getElementById("qr-msg");
  const userQR = document.getElementById("userQR");
  const adminQR = document.getElementById("adminQR");
  const siteContent = document.getElementById("site-content");

  // Default: hide both QR canvases
  userQR.style.display = "none";
  adminQR.style.display = "none";

  if (isMobile()) {
    // ‚úÖ MOBILE USERS: show the website normally
    qrSection.style.display = "none";
    siteContent.style.display = "block";
  } else {
    // ‚úÖ DESKTOP:
    if (token === ADMIN_TOKEN) {
      // Admin on PC: show website
      qrSection.style.display = "none";
      siteContent.style.display = "block";
    } else {
      // Normal PC: show QR only (so users can scan using phone)
      siteContent.style.display = "none";
      qrSection.style.display = "flex";

      qrMsg.textContent = "Scan this QR code using your phone to open RecyShred:";
      userQR.style.display = "block";

      QRCode.toCanvas(userQR, BASE_URL, { width: 220 });
    }
  }
</script>

<script src="script.js"></script>
</body>
</html>
